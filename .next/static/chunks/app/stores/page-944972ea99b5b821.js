(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88],{8604:function(e,s,t){Promise.resolve().then(t.bind(t,2333))},2333:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var r=t(7437),a=t(2265),n=t(9376),l=t(5e3),i=t(2972),c=t.n(i),o=t(3774),d=t(6362),x=t(6424);function m(e){var s;let{store:t}=e;return(0,r.jsx)(c(),{href:"/stores/".concat(t.id),children:(0,r.jsx)(x.Zb,{className:"h-full hover:shadow-lg transition-shadow cursor-pointer",children:(0,r.jsxs)(x.aY,{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.name}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mb-3",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-1"}),t.area]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:{book_cafe:"ブックカフェ",used_book:"古書",children_book:"児童書",general:"一般書店",specialty:"専門書店"}[s=t.category]||s})}),t.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:t.description}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[t.x_link&&(0,r.jsxs)("a",{href:t.x_link,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"flex items-center text-sm text-gray-600 hover:text-blue-600 transition-colors",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4 mr-1"}),"X"]}),t.instagram_link&&(0,r.jsxs)("a",{href:t.instagram_link,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"flex items-center text-sm text-gray-600 hover:text-pink-600 transition-colors",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4 mr-1"}),"Instagram"]}),t.website_link&&(0,r.jsxs)("a",{href:t.website_link,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"flex items-center text-sm text-gray-600 hover:text-green-600 transition-colors",children:[(0,r.jsx)(d.Z,{className:"w-4 h-4 mr-1"}),"公式サイト"]})]})]})})})}function u(){let[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)(!0),[c,o]=(0,a.useState)(null),[d,u]=(0,a.useState)({page:1,limit:20,total:0,totalPages:0}),h=(0,n.useSearchParams)(),g=h.get("area")||"",p=h.get("category")||"",f=h.get("search")||"";(0,a.useEffect)(()=>{j()},[g,p,f]);let j=async()=>{try{i(!0);let t=new URLSearchParams;g&&t.set("area",g),p&&t.set("category",p),f&&t.set("search",f),t.set("page","1"),t.set("limit","20");let r=await fetch("/api/stores?".concat(t.toString())),a=await r.json();if(a.success)s(a.data.stores),u(a.data.pagination);else{var e;o((null===(e=a.error)||void 0===e?void 0:e.message)||"書店の取得に失敗しました")}}catch(e){o("ネットワークエラーが発生しました")}finally{i(!1)}};return t?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"書店情報を読み込み中..."})]})}):c?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-red-600 mb-4",children:c}),(0,r.jsx)(x.zx,{onClick:j,children:"再試行"})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"書店一覧"}),(0,r.jsx)(l.SearchForm,{initialArea:g,initialCategory:p,initialSearch:f})]}),0===e.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-gray-600 text-lg",children:"条件に合う書店が見つかりませんでした。"}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:"検索条件を変更してお試しください。"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("p",{className:"text-gray-600",children:[d.total,"件の書店が見つかりました"]})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,r.jsx)(m,{store:e},e.id))}),d.totalPages>1&&(0,r.jsx)("div",{className:"mt-8 flex justify-center",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(x.zx,{variant:"outline",disabled:1===d.page,onClick:()=>{},children:"前へ"}),(0,r.jsxs)("span",{className:"flex items-center px-4 py-2 text-gray-700",children:[d.page," / ",d.totalPages]}),(0,r.jsx)(x.zx,{variant:"outline",disabled:d.page===d.totalPages,onClick:()=>{},children:"次へ"})]})})]})]})})}function h(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"読み込み中..."})]})}),children:(0,r.jsx)(u,{})})}},5e3:function(e,s,t){"use strict";t.d(s,{SearchForm:function(){return c}});var r=t(7437),a=t(2265),n=t(9376);let l=(0,t(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var i=t(6424);function c(e){let{initialArea:s="",initialCategory:t="",initialSearch:c=""}=e,[o,d]=(0,a.useState)(s),[x,m]=(0,a.useState)(t),[u,h]=(0,a.useState)(c),g=(0,n.useRouter)();return(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=new URLSearchParams;o&&s.set("area",o),x&&s.set("category",x),u&&s.set("search",u),g.push("/stores?".concat(s.toString()))},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"area",className:"block text-sm font-medium text-gray-700 mb-1",children:"エリア"}),(0,r.jsxs)("select",{id:"area",value:o,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"すべてのエリア"}),(0,r.jsx)("option",{value:"東京",children:"東京"}),(0,r.jsx)("option",{value:"大阪",children:"大阪"}),(0,r.jsx)("option",{value:"京都",children:"京都"}),(0,r.jsx)("option",{value:"横浜",children:"横浜"}),(0,r.jsx)("option",{value:"名古屋",children:"名古屋"}),(0,r.jsx)("option",{value:"福岡",children:"福岡"}),(0,r.jsx)("option",{value:"札幌",children:"札幌"}),(0,r.jsx)("option",{value:"仙台",children:"仙台"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"カテゴリ"}),(0,r.jsxs)("select",{id:"category",value:x,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"すべてのカテゴリ"}),(0,r.jsx)("option",{value:"book_cafe",children:"ブックカフェ"}),(0,r.jsx)("option",{value:"used_book",children:"古書"}),(0,r.jsx)("option",{value:"children_book",children:"児童書"}),(0,r.jsx)("option",{value:"general",children:"一般書店"}),(0,r.jsx)("option",{value:"specialty",children:"専門書店"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"書店名で検索"}),(0,r.jsx)(i.II,{id:"search",type:"text",placeholder:"書店名を入力",value:u,onChange:e=>h(e.target.value)})]})]}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)(i.zx,{type:"submit",className:"flex items-center",children:[(0,r.jsx)(l,{className:"w-4 h-4 mr-2"}),"検索"]})})]})}},6424:function(e,s,t){"use strict";t.d(s,{zx:function(){return i},Zb:function(){return o},aY:function(){return d},II:function(){return c}});var r=t(7437);t(2265);var a=t(1994),n=t(3335);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.m6)((0,a.W)(s))}function i(e){let{variant:s="primary",size:t="md",loading:a=!1,className:n,children:i,disabled:c,...o}=e;return(0,r.jsxs)("button",{className:l("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-blue-500"}[s],{sm:"h-8 px-3 text-sm",md:"h-10 px-4",lg:"h-12 px-6 text-lg"}[t],n),disabled:c||a,...o,children:[a&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i]})}function c(e){let{label:s,error:t,required:a,className:n,id:i,...c}=e,o=i||"input-".concat(Math.random().toString(36).substr(2,9));return(0,r.jsxs)("div",{className:"space-y-2",children:[s&&(0,r.jsxs)("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:[s,a&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsx)("input",{id:o,className:l("w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",t?"border-red-500":"border-gray-300",n),...c}),t&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:t})]})}function o(e){let{className:s,children:t,...a}=e;return(0,r.jsx)("div",{className:l("bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow",s),...a,children:t})}function d(e){let{className:s,children:t,...a}=e;return(0,r.jsx)("div",{className:l("p-6",s),...a,children:t})}},6362:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]])},3774:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])}},function(e){e.O(0,[459,972,971,117,744],function(){return e(e.s=8604)}),_N_E=e.O()}]);